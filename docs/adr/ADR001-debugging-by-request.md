# ADR001: Debugging By Request

### Status
Accepted

---

### Context
OPA decision log는 정책(policy)과 룰(rule)을 기준으로 판단 결과를 기록한다.
이 구조는 정책 자체를 검증하거나 정책 동작을 확인하는 데에는 적합

하지만 실제 운영 환경에서 디버깅의 출발점은 
정책이 아니라 **하나의 접근 요청(request)** 이다.

운영자는 먼저 “이 요청이 왜 Deny 되었는가?”를 확인하고,  
그 다음에 어떤 정책이나 룰이 영향을 주었는지를 따라가게 된다.

---

### Decision
이 프로젝트에서는 OPA decision log 디버깅을
**하나의 접근 요청을 기준으로 판단 결과를 이해하고 과정**으로 정의

요청 단위 디버깅이란,
- 하나의 접근 요청에 대해
- 적용된 여러 정책과 룰의 결과를 묶어
- 최종 Deny에 이르게 된 맥락을 한 번에 파악하는 것을 의미

---

### Consequences
- 정책과 룰 결과를 요청 기준으로 다시 정리할 필요가 있다.
- 운영자는 여러 정책 로그를 직접 조합하지 않아도 된다.
- 이후의 로그 재배치, 정규화, 저장소 선택은 이 정의를 기준으로 판단하게 된다.
